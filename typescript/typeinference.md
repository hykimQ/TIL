# 타입 유추(Type Inference)

```typescript
let x = 3;
```

변수 x의 타입은 number라고 유추할 수 있습니다. 이러한 종류의 유추는 변수와 멤버를 초기화하고, 파라미터 Default 값을 설정하고, 함수 리턴 타입을 결정할 때 발생합니다.

## 가장 공통적인 타입

여러 가지 표현식에서 타입 유추가 이루어지면 그 표현식의 타입이 “가장 공통적인 타입(Best common type)”을 계산하는데 사용합니다.

```typescript
let x = [0, 1, null];
```

위의 예제에서 x의 타입을 추론하기 위해서는 배열 각 요소 타입을 고려해야 합니다. 여기에서는 배열의 타입에 대한 두 가지 선택 사항인 number와 null이 있습니다. 가장 공통적인 타입 알고리즘은 각 후보 타입을 고려하고 다른 모든 후보와 호환되는 타입을 선택합니다.

제공되는 후보 타입 중에서 가장 공통적인 타입을 선택해야 하기 때문에 타입이 공통 구조를 공유하지만, 아래의 예제 처럼 모든 타입의 수퍼 타입이 하나도없는 경우가 있습니다.

```typescript
let zoo = [new Rhino(), new Elephant(), new Snake()];
```

이상적으로, 우리는 zoo가 Animal[]로 유추되기를 원할 수 있습니다. 하지만, 배열에 정확히 Animal 타입의 객체가 없습니다. 그리고 TypeScript는 배열 요소 타입에 대한 추측은 하지않습니다. 이 문제를 해결하려면, 어떤 타입도 다른 모든 후보자의 수퍼 타입이 아닌 경우 명시적으로 타입을 제공해야 합니다.

```typescript
let zoo: Animal[] = [new Rhino(), new Elephant(), new Snake()];
```

가장 공통 타입이 발견되지 않으면, 타입 유추의 결과는 빈 객체 타입 {}입니다. 이 타입은 멤버가 없으므로 any 프로퍼티을 사용하려고 하면 에러가 발생합니다. 이 결과는 객체의 타입을 암묵적으로 결정할 수 없는 경우에 타입 안전성을 제공하면서 여전히 Type-agnostic 수단으로 객체를 사용할 수 있습니다.
